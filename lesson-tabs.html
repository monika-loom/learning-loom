<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Lesson – Learning Loom</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="styles.css">
  <style>
    .tabs { display:flex; gap:0.5rem; margin-bottom:1.5rem; flex-wrap:wrap; }
    .tab { padding:0.6rem 1.2rem; border-radius:50px; cursor:pointer; border:1px solid var(--border); background:transparent; color:var(--text-dim); transition:.3s; }
    .tab.active { background:linear-gradient(90deg, var(--cyan), var(--magenta)); color:var(--bg-deep); border-color:transparent; }
    .panel { display:none; }
    .panel.active { display:block; animation:fadeIn .4s; }
    @keyframes fadeIn { from {opacity:0; transform:translateY(10px);} to {opacity:1; transform:translateY(0);} }
    .badge { font-size:.75rem; padding:.2rem .6rem; border-radius:50px; margin-left:.5rem; vertical-align:middle; }
    .ai { background:var(--magenta); color:#fff; }
    .web { background:var(--cyan); color:var(--bg-deep); }
    .pdf-list { list-style:none; padding:0; }
    .pdf-list li { display:flex; justify-content:space-between; align-items:center; padding:.6rem 0; border-bottom:1px solid var(--border); }
    .pdf-list a { color:var(--cyan); text-decoration:none; font-weight:500; }
    .pdf-list a:hover { text-decoration:underline; }
  </style>
</head>
<body>
  <div class="backdrop">
    <div class="orb orb1"></div>
    <div class="orb orb2"></div>
    <div class="orb orb3"></div>
    <div class="orb-gold"></div>
  </div>

  <div class="container">
    <h2 id="pageTitle" class="modern-title">Generating lesson…</h2>
    <div class="card">
      <div class="tabs" id="tabs"></div>
      <div id="panels"></div>
      <button class="btn btn-primary" onclick="startNew()">Start Another Lesson</button>
    </div>
  </div>

  <div class="made-by">Made By: Monika Pathak</div>

  <script>
    /* ---- 1. read topic & level ---- */
    const topic = sessionStorage.getItem('chatTopic') || 'Sun';
    const level = sessionStorage.getItem('chatLevel') || 'elementary';
    const levelText = {
      elementary:'Montessori – Ages 3-6',
      primary:'Primary – Ages 7-11',
      secondary:'Secondary – Ages 12-15',
      higher:'Higher Secondary – Ages 16-18'
    };

    /* ---- 2. mock AI + web content ---- */
    const lessonBank = {
      elementary:{
        rhymes:{ ai:['Sun, Sun, Mr Golden Sun,<br>Please shine down on me!','Yellow, bright and full of heat,<br>Morning Sun feels oh-so sweet!'], web:['Twinkle, twinkle little Sun…'] },
        stories:{ ai:['Bunny asks Mummy Rabbit why the sky is warm.','Mummy calls the Sun “our big lamp.”'], web:['The Sun and the Wind – Aesop fable'] },
        activities:{ ai:['Paper-plate Sun craft','Outdoor shadow tracing','Sunrise yoga stretch'], web:['Sun sensory bin'] },
        lessonPlans:{ ai:['3-day Montessori plan'], web:['<a href="https://example.com/montessori.pdf" download>Montessori PDF</a>'] },
        worksheets:{ ai:['Trace-the-Sun worksheet'], web:['<a href="https://example.com/shapes.pdf" download>Shape Hunt PDF</a>'] },
        videos:{ web:['<a href="https://youtube.com/watch?v=abc" target="_blank">SciShow Kids – Sun</a>'] },
        pdfs:{ web:[{name:'Montessori PDF',url:'https://example.com/montessori.pdf'},{name:'Shape Hunt',url:'https://example.com/shapes.pdf'}] }
      },
      primary:{
        rhymes:{ ai:['Nuclear fusion in the core…'], web:['The Sun is a star…'] },
        stories:{ ai:['Sunny the Photon’s million-year journey.'], web:['Myth-busting “The Sun is on fire”'] },
        activities:{ ai:['Build a simple sundial','Sun-fact flip-book'], web:['Solar oven s’mores'] },
        lessonPlans:{ ai:['5-day unit plan'], web:['<a href="https://example.com/primary.pdf" download>Primary PDF</a>'] },
        worksheets:{ ai:['Label-the-Sun-parts','Sunspot graph sheet'], web:['<a href="https://example.com/skip.pdf" download>Skip-Count PDF</a>'] },
        videos:{ web:['<a href="https://youtube.com/watch?v=def" target="_blank">Crash Course Kids – Sun</a>'] },
        pdfs:{ web:[{name:'Primary PDF',url:'https://example.com/primary.pdf'},{name:'Skip-Count PDF',url:'https://example.com/skip.pdf'}] }
      },
      secondary:{
        rhymes:{ ai:['Fusion chains in the core make light…'], web:['Sunspots dance in an eleven-year beat…'] },
        stories:{ ai:['Space-weather forecaster saves a satellite.'], web:['Case study: Carrington Event 1859'] },
        activities:{ ai:['Plot 30-day sunspot numbers','Pin-hole projector'], web:['Build a simple spectroscope'] },
        lessonPlans:{ ai:['Week-long module'], web:['<a href="https://example.com/secondary.pdf" download>Secondary PDF</a>'] },
        worksheets:{ ai:['Sun-layer crossword','Fusion equation fill-in'], web:['<a href="https://example.com/triangle.pdf" download>Triangle Cards PDF</a>'] },
        videos:{ web:['<a href="https://youtube.com/watch?v=ghi" target="_blank">NASA – Sun 101</a>'] },
        pdfs:{ web:[{name:'Secondary PDF',url:'https://example.com/secondary.pdf'},{name:'Triangle Cards',url:'https://example.com/triangle.pdf'}] }
      },
      higher:{
        rhymes:{ ai:['Proton-proton chains and CNO cycles shine…'], web:['MHD waves heat the coronal sea…'] },
        stories:{ ai:['Grad student solves coronal heating with ML.'], web:['Interview with Dr. Kelly Korreck (NASA)'] },
        activities:{ ai:['Python fusion-rate sim','Analyse SDO FITS images'], web:['Calculate solar constant'] },
        lessonPlans:{ ai:['2-week advanced unit'], web:['<a href="https://example.com/higher.pdf" download>Higher PDF</a>'] },
        worksheets:{ ai:['Fusion cross-section derivations'], web:['<a href="https://example.com/phonics.pdf" download>Phonics PDF</a>'] },
        videos:{ web:['<a href="https://youtube.com/watch?v=jkl" target="_blank">PBS Space-Time – Corona Heat</a>'] },
        pdfs:{ web:[{name:'Higher PDF',url:'https://example.com/higher.pdf'},{name:'Phonics PDF',url:'https://example.com/phonics.pdf'}] }
      }
    };

    /* ---- 3. build tabs & panels ---- */
    const tabsData = [
      {key:'rhymes',label:'Rhymes'},
      {key:'stories',label:'Stories'},
      {key:'activities',label:'Activities'},
      {key:'lessonPlans',label:'Lesson Plans'},
      {key:'worksheets',label:'Worksheets'},
      {key:'videos',label:'Videos'},
      {key:'pdfs',label:'PDFs'}
    ];

    function buildTabs() {
      const tabsContainer = document.getElementById('tabs');
      const panelsContainer = document.getElementById('panels');
      tabsData.forEach((tab, idx) => {
        // tab button
        const btn = document.createElement('button');
        btn.className = 'tab' + (idx === 0 ? ' active' : '');
        btn.textContent = tab.label;
        btn.onclick = () => switchTab(tab.key, btn);
        tabsContainer.appendChild(btn);
        // panel
        const panel = document.createElement('div');
        panel.id = 'panel-' + tab.key;
        panel.className = 'panel' + (idx === 0 ? ' active' : '');
        panel.innerHTML = buildPanelContent(tab.key);
        panelsContainer.appendChild(panel);
      });
    }
    function switchTab(key, btn) {
      document.querySelectorAll('.tab').forEach(b => b.classList.remove('active'));
      document.querySelectorAll('.panel').forEach(p => p.classList.remove('active'));
      btn.classList.add('active');
      document.getElementById('panel-' + key).classList.add('active');
    }
    function buildPanelContent(key) {
      const data = lessonBank[level][key];
      if (!data) return '<p>No content available.</p>';
      let html = '';
      if (data.ai && data.ai.length) html += `<h3>AI Generated <span class="badge ai">AI</span></h3><ul>${data.ai.map(item => `<li>${item}</li>`).join('')}</ul>`;
      if (data.web && data.web.length) html += `<h3>Web Search <span class="badge web">Web</span></h3><ul>${data.web.map(item => `<li>${item}</li>`).join('')}</ul>`;
      if (key === 'pdfs' && data.web && data.web.length) html = `<h3>Download PDFs <span class="badge web">Web</span></h3><ul class="pdf-list">${data.web.map(pdf => `<li><span>${pdf.name}</span><a href="${pdf.url}" download>Download</a></li>`).join('')}</ul>`;
      return html || '<p>No content available.</p>';
    }

    /* ---- 4. on load ---- */
    window.onload = () => {
      document.getElementById('pageTitle').textContent = `Lesson: ${topic} – ${levelText[level]}`;
      buildTabs();
    };
    function startNew() { window.location = 'topic-level.html'; }
  </script>
</body>
</html>